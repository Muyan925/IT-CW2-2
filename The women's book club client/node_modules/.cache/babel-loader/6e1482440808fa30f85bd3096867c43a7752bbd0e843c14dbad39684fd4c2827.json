{"ast":null,"code":"export default {\n  name: 'LoginForm',\n  data() {\n    return {\n      isSee: false,\n      phoneNumber: '',\n      password: '',\n      codeSrc: ''\n    };\n  },\n  methods: {\n    changeIsSee() {\n      this.isSee = !this.isSee;\n    },\n    login() {\n      if (this.phoneNumber === '' || this.password === '') {\n        this.$message.warning('手机号和密码不能为空');\n        return;\n      }\n      this.$axios.get(`/login?userId=${this.phoneNumber}&userPassword=${this.password}`).then(response => {\n        console.log(response.data);\n        if (response.data.flag) {\n          console.log(response.data);\n          this.$message.success(response.data.msg);\n          this.$store.dispatch('saveUserInfo', response.data.data);\n          this.timer = setTimeout(() => {\n            this.$router.replace('/manage/index');\n          }, 1500);\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    loadCode() {\n      this.$axios.get('/user/getCaptcha').then(response => {\n        this.codeSrc = 'data:image/png' + response.data;\n        console.log(response);\n      });\n    },\n    getCode() {\n      clearTimeout(this.timer);\n      this.timer = setTimeout(() => {\n        this.loadCode();\n      }, 300);\n    }\n  },\n  created() {\n    this.loadCode();\n  },\n  beforeDestroy() {\n    clearTimeout(this.timer);\n  }\n};","map":{"version":3,"mappings":"AAyBA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;QACAC;QACA;UACAA;UACA;UACA;UACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;QACAD;MACA;IACA;IACAE;MACAC;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAF;EACA;AACA","names":["name","data","isSee","phoneNumber","password","codeSrc","methods","changeIsSee","login","console","loadCode","getCode","clearTimeout","created","beforeDestroy"],"sourceRoot":"src/components","sources":["LoginForm.vue"],"sourcesContent":["<template>\n  <div class=\"login-form\">\n    <!-- <img src=\"../assets/images/user.webp\" alt=\"\" srcset=\"\"> -->\n    <div class=\"title\">Login</div>\n    <div class=\"input-content\">\n        <input type=\"text\" pattern=\"\" v-model=\"phoneNumber\">\n        <span class=\"placeholder\">手机号</span>\n    </div>\n    <div class=\"input-content\">\n        <input :type=\"isSee ? 'text' : 'password'\" pattern=\"\" v-model=\"password\">\n        <span class=\"placeholder\">密码</span>\n        <span class=\"see iconfont\" @click=\"changeIsSee\">{{ isSee ? '&#xe624;' : '&#xe625;' }}</span>\n    </div>\n    <div class=\"input-content code\">\n        <input type=\"text\">\n        <div class=\"code-content\" @click=\"getCode\">\n            <img :src=\"codeSrc\" alt=\"\" srcset=\"\">\n        </div>\n        <span class=\"placeholder\">验证码</span>\n    </div>\n    <button class=\"btn\" @click=\"login\">登陆</button>\n  </div>\n</template>\n\n<script>\nexport default {\n    name: 'LoginForm',\n    data() {\n        return {\n            isSee: false,\n            phoneNumber: '',\n            password: '',\n            codeSrc: ''\n        }\n    },\n    methods: {\n        changeIsSee() {\n            this.isSee = !this.isSee\n        },\n        login() {\n            if (this.phoneNumber === '' || this.password === '') {\n                this.$message.warning('手机号和密码不能为空')\n                return\n            }\n            this.$axios.get(`/login?userId=${this.phoneNumber}&userPassword=${this.password}`).then(response => {\n                console.log(response.data);\n                if (response.data.flag) {\n                    console.log(response.data);\n                    this.$message.success(response.data.msg)\n                    this.$store.dispatch('saveUserInfo', response.data.data)\n                    this.timer = setTimeout(() => {\n                        this.$router.replace('/manage/index')\n                    }, 1500);\n                } else {\n                    this.$message.error(response.data.msg)\n                }\n            })\n        },\n        loadCode() {\n            this.$axios.get('/user/getCaptcha').then(response => {\n                this.codeSrc = 'data:image/png' + response.data\n                console.log(response);\n            })\n        },\n        getCode() {\n            clearTimeout(this.timer)\n            this.timer = setTimeout(() => {\n                this.loadCode()\n            }, 300);\n        }\n    },\n    created() {\n        this.loadCode()\n    },\n    beforeDestroy() {\n        clearTimeout(this.timer)\n    }\n}\n</script>\n\n<style scoped>\n.login-form {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    /* justify-content: space-between; */\n    width: 100%;\n    height: 100%;\n    padding: 120px 20px 20px;\n    /* background-color: red; */\n    /* background-color: pink; */\n}\n\n/* .login-form img {\n    width: 100px;\n    height: 100px;\n    border-radius: 50%;\n    border: 1px solid rgb(179, 225, 249);\n    margin-bottom: 40px;\n} */\n\n.login-form input {\n    height: 30px;\n    width: 240px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    outline: none;\n    transition: all .2s;\n    padding: 2px 4px;\n    font-size: 16px;\n}\n\n.login-form input:focus {\n    border-color:  #67a2ea;\n}\n.input-content {\n    position: relative;\n    margin-bottom: 40px;\n}\n.input-content .placeholder {\n    display: block;\n    position: absolute;\n    height: 30px;\n    line-height: 30px;\n    top: 0;\n    left: 4px;\n    font-size: 14px;\n    color: #929191;\n    transition: all .3s;\n    color: rgb(224, 224, 224);\n}\n\n.input-content input:focus + .placeholder {\n    top: -24px;\n    color: #67a2ea;\n    font-size: 12px;\n}\n\n.input-content input:invalid + .placeholder {\n    top: -24px;\n    color: #67a2ea;\n    font-size: 12px;\n}\n\n.login-form button {\n    width: 240px;\n    margin-top: 70px;\n}\n\n.see {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 30px;\n    height: 30px;\n    line-height: 30px;\n    /* background-color: blue; */\n    text-align: center;\n    cursor: pointer;\n    color: #929191;\n}\n.title {\n    position: absolute;\n    top: 20px;\n    right: 28px;\n    font-size: 40px;\n    font-weight: 700;\n    color: #67a2ea;\n}\n\n.remember-me {\n    /* background-color: pink; */\n    display: flex;\n    align-items: center;\n    width: 200px;\n}\n\n.code {\n    display: flex;\n}\n\n.code input {\n    width: 170px;\n    margin-right: 10px;\n}\n\n.code-content {\n    width: 60px;\n    height: 30px;\n}\n\n.code-content img {\n    width: 100%;\n    height: 100%;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}