{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'AIChat',\n  data() {\n    return {\n      messageList: [\n        // {\n        //     type: 'receive',\n        //     content: '123'\n        // },\n        // {\n        //     type: 'send',\n        //     content: 'asdhf'\n        // }\n      ],\n      keywords: ''\n    };\n  },\n  methods: {\n    sendMessage() {\n      if (!this.keywords) {\n        this.$message.info('请输入问题');\n        return;\n      }\n      this.messageList.push({\n        type: 'send',\n        content: this.keywords\n      });\n      this.$nextTick(() => {\n        this.$refs.mc.scrollTop = '10000000';\n      });\n      this.getAnswer(this.keywords);\n      this.keywords = '';\n    },\n    getAnswer(keywords) {\n      this.$axios.post('https://api.openai.com/v1/chat/completions', {\n        \"model\": \"gpt-3.5-turbo\",\n        \"messages\": [{\n          \"role\": \"user\",\n          \"content\": keywords\n        }]\n      }, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Authorization\": \"Bearer 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\"\n        }\n      }).then(response => {\n        if (response.status === 200) {\n          this.messageList.push({\n            type: 'receive',\n            content: response.data.choices[0].message.content\n          });\n        }\n        this.$nextTick(() => {\n          this.$refs.mc.scrollTop = '10000000';\n        });\n      });\n    }\n  },\n  computed: {\n    userImage() {\n      return this.$store.getters['getUserPhoto'];\n    }\n  }\n};","map":{"version":3,"mappings":";AA0BA;EACAA;EACAC;IACA;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;MAAA,CACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;MACA;MACA;QACAC;QACAC;MACA;MACA;QACA;MACA;MACA;MACA;IAEA;IAEAC;MACA;QACA;QACA;UAAA;UAAA;QAAA;MAEA;QACAC;UACA;UACA;QACA;MACA;QACA;UACA;YACAH;YACAC;UACA;QACA;QAEA;UACA;QACA;MACA;IACA;EACA;EACAG;IACAC;MACA;IACA;EACA;AACA","names":["name","data","messageList","keywords","methods","sendMessage","type","content","getAnswer","headers","computed","userImage"],"sourceRoot":"src/components","sources":["AIChat.vue"],"sourcesContent":["<template>\n  <div class=\"chat\">\n    <div class=\"title\">欢迎使用chat-gpt</div>\n    <ul class=\"msg-content\" ref=\"mc\">\n        <li v-for=\"(item, index) in messageList\" :key=\"index\" :class=\"item.type\">\n            <img v-if=\"item.type === 'receive'\" src=\"../assets/images/ai.png\" alt=\"\" srcset=\"\">\n            <img v-if=\"item.type === 'send'\" :src=\"userImage\" alt=\"\" srcset=\"\">\n            <div class=\"message-box\">\n                {{item.content}}\n            </div>\n        </li>\n        <!-- <li class=\"send\">\n            <img :src=\"userImage\" alt=\"\" srcset=\"\">\n            <div class=\"message-box\">\n                123\n            </div>\n        </li> -->\n    </ul>\n    <div class=\"ipt-content\">\n        <textarea v-model=\"keywords\" name=\"\" id=\"\" cols=\"30\" rows=\"10\" placeholder=\"输入你的问题\"></textarea>\n        <button class=\"btn submit\" @click=\"sendMessage\">发送</button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n    name: 'AIChat',\n    data() {\n        return {\n            messageList: [\n                // {\n                //     type: 'receive',\n                //     content: '123'\n                // },\n                // {\n                //     type: 'send',\n                //     content: 'asdhf'\n                // }\n            ],\n            keywords: ''\n        }\n    },\n    methods: {\n        sendMessage() {\n            if (!this.keywords) {\n                this.$message.info('请输入问题')\n                return\n            }\n            this.messageList.push({\n                type: 'send',\n                content: this.keywords\n            })\n            this.$nextTick(() => {\n                this.$refs.mc.scrollTop = '10000000'\n            })\n            this.getAnswer(this.keywords)\n            this.keywords = ''\n            \n        },\n\n        getAnswer(keywords) {\n            this.$axios.post('https://api.openai.com/v1/chat/completions', {\n                \"model\": \"gpt-3.5-turbo\",\n                \"messages\": [{\"role\": \"user\", \"content\": keywords}]\n\n            }, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": \"Bearer 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\"\n                }\n            }).then(response => {\n                if (response.status === 200) {\n                    this.messageList.push({\n                        type: 'receive',\n                        content: response.data.choices[0].message.content\n                    })\n                }\n\n                this.$nextTick(() => {\n                    this.$refs.mc.scrollTop = '10000000'\n                })\n            })\n        }\n    },\n    computed: {\n        userImage() {\n            return this.$store.getters['getUserPhoto']\n        }\n    },\n}\n</script>\n\n<style scoped>\n.chat {\n    position: absolute;\n    bottom: 20px;\n    right: 20px;\n    width: 400px;\n    height: 600px;\n    background-color: #e9f5fe;\n    z-index: 999;\n    padding: 20px;\n    border-radius: 10px;\n    box-shadow: 0 0 20px 2px rgba(103, 103, 103, 0.3);\n}\n\n.title {\n    font-size: 24px;\n    height: 30px;\n    line-height: 30px;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n.msg-content {\n    overflow-y: scroll;\n    width: 100%;\n    height: 370px;\n    background-color: rgb(236, 236, 236);\n    padding: 10px;\n}\n\n.msg-content li {\n    display: flex;\n    align-content: center;\n    /* background-color: red; */\n    margin-bottom: 20px;\n}\n\n.msg-content li img {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n}\n\n.message-box {\n    max-width: 240px;\n    min-width: 60px;\n    /* height: 40px; */\n    background-color: rgb(90, 162, 250);\n    padding: 10px;\n    border-radius: 5px;\n    margin-left: 10px;\n}\n\n.send {\n    flex-direction: row-reverse;\n}\n\n.send .message-box {\n    margin-right: 10px;\n    margin-left: 0;\n}\n\n.ipt-content {\n    position: relative;\n    height: 140px;\n    /* background-color: aliceblue; */\n}\n\n.ipt-content textarea {\n    width: 100%;\n    height: 100%;\n    border: none;\n    /* background-color: red; */\n    background-color: transparent;\n    padding: 10px 0;\n    font-size: 16px;\n    resize: none;\n    outline: none;\n}\n\n.submit {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}