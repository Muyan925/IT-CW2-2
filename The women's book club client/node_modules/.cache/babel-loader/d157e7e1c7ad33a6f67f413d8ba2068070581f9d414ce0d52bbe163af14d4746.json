{"ast":null,"code":"export default {\n  name: 'UserInfo',\n  data() {\n    return {\n      dialogFormVisible: true,\n      onEdit: false,\n      user: {\n        userId: '',\n        userName: '',\n        userGender: '',\n        userAddress: '',\n        userEmail: '',\n        userInfo: ''\n      }\n    };\n  },\n  methods: {\n    showEdit() {\n      this.onEdit = !this.onEdit;\n      if (!this.onEdit) {\n        this.handleModify();\n      }\n    },\n    handleModify() {\n      this.$axios.post('/user/UpdateUserBasicInfoByUid', this.user).then(response => {\n        if (response.data.flag) {\n          this.$message.success(response.data.msg);\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    getUserInfo() {\n      this.$axios.get(`/user/GetUserInfoByUid/${this.uid}`).then(response => {\n        if (response.data.flag) {\n          this.user = response.data.data;\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    updatePhoto(e) {\n      if (e.currentTarget.files.length === 0) {\n        return;\n      }\n      const formData = new FormData();\n      formData.append('photo', e.currentTarget.files[0]);\n      this.$axios.post(`/user/UpdateUserPhotoByUid/${this.uid}`, formData).then(response => {\n        if (response.data.flag) {\n          this.$message.success(response.data.msg);\n          this.getUserInfo();\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    }\n  },\n  computed: {\n    uid() {\n      return this.$store.getters['getUserId'];\n    }\n  },\n  created() {\n    this.getUserInfo();\n  }\n};","map":{"version":3,"mappings":"AA6DA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;MACAC;MACA;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;EACA;AACA","names":["name","data","dialogFormVisible","onEdit","user","userId","userName","userGender","userAddress","userEmail","userInfo","methods","showEdit","handleModify","getUserInfo","updatePhoto","formData","computed","uid","created"],"sourceRoot":"src/pages","sources":["UserInfo.vue"],"sourcesContent":["<template>\n  <div class=\"user\">\n    <div class=\"title\">\n        <span class=\"name\">你好, sllowcat</span>\n        <span class=\"saying\">书山有路勤为径，学海无涯苦作舟</span>\n    </div>\n    <div class=\"content\">\n       <div>个人基本信息</div>\n        <div class=\"row\">\n            <ul class=\"infos\">\n                <li>\n                    <span>UID</span><span>{{user.userId}}</span>\n                </li>\n                <li>\n                    <span>昵称</span><span v-show=\"!onEdit\">{{user.userName}}</span><input v-model=\"user.userName\" type=\"text\" v-show=\"onEdit\">\n                </li>\n                <li>\n                    <span>性别</span><span v-show=\"!onEdit\">{{user.userGender}}</span><input v-model=\"user.userGender\" type=\"text\" v-show=\"onEdit\">\n                </li>\n                <li>\n                    <span>地址</span><span v-show=\"!onEdit\">{{user.userAddress}}</span><input v-model=\"user.userAddress\" type=\"text\" v-show=\"onEdit\">\n                </li>\n                <li>\n                    <span>邮箱</span><span v-show=\"!onEdit\">{{user.userEmail}}</span><input v-model=\"user.userEmail\" type=\"text\" v-show=\"onEdit\">\n                </li>\n                <li>\n                    <span>个人简介</span><span v-show=\"!onEdit\">{{user.userInfo}}</span>\n                    <el-input\n                    v-show=\"onEdit\"\n                    type=\"textarea\"\n                    placeholder=\"请输入内容\"\n                    maxlength=\"100\"\n                    v-model=\"user.userInfo\"\n                    show-word-limit\n                    style=\"width: 300px; vertical-align: top;\"\n                    >\n                    </el-input>\n                </li>\n            </ul>\n            <div class=\"right\">\n                <div class=\"photo\">\n                    <label>\n                        <input type=\"file\" name=\"\" id=\"\" style=\"display: none;\" @change=\"updatePhoto\">\n                        <img :src=\"user.userImage\" alt=\"\" srcset=\"\">\n                    </label>\n                    <span class=\"tips\">点击上传图片</span>\n                </div>\n                <div class=\"opts\">\n                    <button class=\"change-pwd btn\">修改密码</button>\n                    <button class=\"edit-info btn\" @click=\"showEdit\">{{ onEdit ? '保存更改' : '编辑信息' }}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <el-dialog title=\"修改密码\" :visible.sync=\"dialogFormVisible\">\n\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n    name: 'UserInfo',\n    data() {\n        return {\n            dialogFormVisible: true,\n            onEdit: false,\n            user: {\n                userId: '',\n                userName: '',\n                userGender: '',\n                userAddress: '',\n                userEmail: '',\n                userInfo: ''\n            }\n        }\n    },\n    methods: {\n        showEdit() {\n            this.onEdit = !this.onEdit\n            if (!this.onEdit) {\n                this.handleModify()\n            }\n        },\n        handleModify() {\n            this.$axios.post('/user/UpdateUserBasicInfoByUid', this.user).then(response => {\n                if (response.data.flag) {\n                    this.$message.success(response.data.msg)\n                } else {\n                    this.$message.error(response.data.msg)\n                }\n            })\n        },\n        getUserInfo() {\n            this.$axios.get(`/user/GetUserInfoByUid/${this.uid}`).then(response => {\n                if (response.data.flag) {\n                    this.user = response.data.data\n                } else {\n                    this.$message.error(response.data.msg)\n                }\n            })\n        },\n        updatePhoto(e) {\n            if (e.currentTarget.files.length === 0) {\n                return\n            }\n            const formData = new FormData()\n            formData.append('photo', e.currentTarget.files[0])\n            this.$axios.post(`/user/UpdateUserPhotoByUid/${this.uid}`, formData).then(response => {\n                if (response.data.flag) {\n                    this.$message.success(response.data.msg)\n                    this.getUserInfo()\n                } else {\n                    this.$message.error(response.data.msg)\n                }\n            })\n        }\n    },\n    computed: {\n        uid() {\n            return this.$store.getters['getUserId']\n        }\n    },\n    created() {\n        this.getUserInfo()\n    }\n}\n</script>\n\n<style scoped>\n.title {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-end;\n    margin-bottom: 20px;\n}\n\n.name {\n    font-size: 24px;\n}\n\n.saying {\n    font-size: 14px;\n    color: rgb(108, 108, 108);\n}\n\n.content {\n    min-width: 620px;\n    padding: 12px;\n    border: 1px solid #ccc;\n    border-radius: 10px;\n}\n\n.content>div:first-child {\n    font-size: 14px;\n    color: rgb(26, 26, 26);\n    margin-bottom: 30px;\n}\n\n.row {\n    display: flex;\n}\n\n.infos li {\n    min-width: 400px;\n    height: 30px;\n    line-height: 30px;\n    margin: 20px 0;\n    font-size: 16px;\n    /* background-color: red; */\n}\n\n.infos li:last-child {\n    height: 54px;\n    /* background-color: red; */\n}\n\n.infos li span:first-child {\n    display: inline-block;\n    width: 100px;\n}\n\n.infos li span:nth-child(2) {\n    display: inline-block;\n    width: 300px;\n    /* background-color: red; */\n    \n}\n\n.infos li input {\n    outline: none;\n    /* border: none;\n    border-bottom: 1px solid #ccc; */\n    border-radius: 5px;\n    border: 1px solid #ccc;\n    height: 30px;\n    width: 300px;\n    font-size: 16px;\n    text-indent: 14px;\n}\n\n.right {\n    display: flex;\n    min-width: 162px;\n    flex-direction: column;\n    margin-left: 30px;\n    align-items: center;\n}\n\n.photo {\n    overflow: hidden;\n    position: relative;\n    width: 160px;\n    height: 160px;\n    border-radius: 50%;\n    margin-top: 20px;\n    margin-bottom: 80px;\n}\n\n.tips {\n    display: none;\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 30px;\n    padding: 5px;\n    background-color: rgba(255, 255, 255, 0.1);\n    backdrop-filter: blur(5px);\n    -webkit-backdrop-filter: blur(5px);\n    font-size: 12px;\n    text-align: center;\n    color: #fff;\n}\n\n.photo:hover .tips {\n    display: block;;\n}\n.photo img {\n    width: 160px;\n    height: 160px;\n    border-radius: 50%;\n}\n\n.opts button:first-child {\n    margin-right: 10px;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}