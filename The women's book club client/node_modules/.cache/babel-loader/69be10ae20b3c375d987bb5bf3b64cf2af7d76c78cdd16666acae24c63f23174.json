{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"PlanManage\",\n  data() {\n    return {\n      addDialogFormVisible: false,\n      addPlan: true,\n      dialogTitle: \"添加学习计划\",\n      plans: [],\n      multipleSelection: [],\n      plan: {\n        uId: \"\",\n        planName: \"\",\n        planStress: \"\",\n        planInfo: \"\",\n        startTime: \"\",\n        endTime: \"\"\n      }\n    };\n  },\n  computed: {\n    uid() {\n      return this.$store.getters[\"getUserId\"];\n    }\n  },\n  methods: {\n    showAddDialog() {\n      this.plan = {};\n      this.dialogTitle = \"添加学习计划\";\n      this.addDialogFormVisible = true;\n      this.addPlan = true;\n    },\n    showModifyDialog(pid) {\n      this.addDialogFormVisible = true;\n      this.dialogTitle = \"编辑学习计划\";\n      this.addPlan = false;\n      this.$axios.get(`Plan/ShowPlanBasicInfoByPid/${pid}`).then(response => {\n        if (response.data.flag) {\n          this.plan = response.data.data;\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    handleDelete(pid) {\n      this.$confirm(\"此操作将永久删除此条记录, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        this.$axios.post(`/Plan/DeleteSinglePlanByPid/${pid}`).then(response => {\n          if (response.data.flag) {\n            this.$message.success(response.data.msg);\n          } else {\n            this.$message.error(response.data.msg);\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n    },\n    handleMultipleDelete() {\n      if (this.multipleSelection.length === 0) {\n        this.$message.info(\"请先选中数据\");\n        return;\n      }\n      this.$confirm(\"此操作将永久删除所有选中的记录, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        let pids = [];\n        this.multipleSelection.forEach(item => {\n          pids.push(item.pId);\n        });\n        const formData = new FormData();\n        formData.append(\"pIds\", pids);\n        this.$axios.post(`/Plan/DeletePlansByPids`, formData).then(response => {\n          if (response.data.flag) {\n            this.$message.success(response.data.msg);\n            this.getPlansList();\n          } else {\n            this.$message.error(response.data.msg);\n          }\n        });\n      }).catch(() => {\n        this.$message({\n          type: \"info\",\n          message: \"已取消删除\"\n        });\n      });\n    },\n    handleModify() {\n      this.plan.uId = this.uid;\n      this.$axios.post(\"/Plan/UpdatePlanBasicInfo\", this.plan).then(response => {\n        if (response.data.flag) {\n          this.$message.success(response.data.msg);\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    handleAddPlan() {\n      this.plan.uId = this.uid;\n      this.$axios.post(\"/Plan/AddPlans\", this.plan).then(response => {\n        if (response.data.flag) {\n          this.$message.success(response.data.msg);\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    handleSelectionChange(v) {\n      this.multipleSelection = v;\n    },\n    getPlansList() {\n      this.$axios.get(`/Plan/GetAllPlansByUid/1`).then(response => {\n        console.log(response.data);\n        if (response.data.flag) {\n          this.plans = response.data.data;\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    }\n  },\n  created() {\n    this.getPlansList();\n  }\n};","map":{"version":3,"mappings":";AA0JA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;QACAC;QACAC;QACAC;MACA,GACAC;QACA,YACAC,2CACAD;UACA;YACA;UACA;YACA;UACA;QACA;MACA,GACAE;QACA;UACAH;UACAI;QACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;QACAP;QACAC;QACAC;MACA,GACAC;QACA;QACA;UACAK;QACA;QACA;QACAC;QACA,YACAL,0CACAD;UACA;YACA;YACA;UACA;YACA;UACA;QACA;MACA,GACAE;QACA;UACAH;UACAI;QACA;MACA;IACA;IACAI;MACA;MACA,YACAN,6CACAD;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAQ;MAEA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACAC;QACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;EACA;AACA","names":["name","data","addDialogFormVisible","addPlan","dialogTitle","plans","multipleSelection","plan","uId","planName","planStress","planInfo","startTime","endTime","computed","uid","methods","showAddDialog","showModifyDialog","handleDelete","confirmButtonText","cancelButtonText","type","then","post","catch","message","handleMultipleDelete","pids","formData","handleModify","handleAddPlan","handleSelectionChange","getPlansList","console","created"],"sourceRoot":"src/pages","sources":["PlanManage.vue"],"sourcesContent":["<template>\n  <div class=\"plan-manage\">\n    <div class=\"title\">\n      <span class=\"name\">计划管理</span>\n    </div>\n    <div class=\"content\">\n      <div class=\"opts\">\n        <div class=\"filter-content\">\n          <el-select\n            v-model=\"value\"\n            placeholder=\"请选择\"\n            size=\"small\"\n            style=\"width: 100px\"\n          >\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n          <el-select\n            v-model=\"value\"\n            placeholder=\"请选择\"\n            size=\"small\"\n            style=\"width: 100px\"\n          >\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            >\n            </el-option>\n          </el-select>\n          <button class=\"filter btn\">筛选</button>\n        </div>\n        <div class=\"search-content\">\n          <input type=\"text\" />\n          <button class=\"search btn\">搜索</button>\n        </div>\n        <div>\n          <button class=\"add-plan btn\" @click=\"showAddDialog\">新增计划</button>\n          <button class=\"all-delete btn\" @click=\"handleMultipleDelete\">\n            批量删除\n          </button>\n        </div>\n      </div>\n      <el-table\n        height=\"500\"\n        ref=\"multipleTable\"\n        :data=\"plans\"\n        tooltip-effect=\"dark\"\n        style=\"width: 100%; border: 1px solid #ccc; margin-top: 20px\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\n        <el-table-column label=\"计划名称\" prop=\"planName\"> </el-table-column>\n        <el-table-column prop=\"startTime\" label=\"开始日期\" width=\"100\">\n        </el-table-column>\n        <el-table-column\n          prop=\"endTime\"\n          label=\"结束日期\"\n          width=\"100\"\n          show-overflow-tooltip\n        >\n        </el-table-column>\n        <el-table-column\n          prop=\"planStress\"\n          label=\"重要度\"\n          width=\"100\"\n          show-overflow-tooltip\n        >\n        </el-table-column>\n        <el-table-column\n          prop=\"planStatus\"\n          label=\"状态\"\n          width=\"100\"\n          show-overflow-tooltip\n        >\n        </el-table-column>\n        <el-table-column label=\"操作\" width=\"160\">\n          <template slot-scope=\"scope\">\n            <span class=\"delete\" @click=\"handleDelete(scope.row.pId)\"\n              >删除</span\n            >\n            <span class=\"modify\" @click=\"showModifyDialog(scope.row.pId)\"\n              >编辑</span\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"pagination\">\n        <el-pagination background layout=\"prev, pager, next\" :total=\"1000\">\n        </el-pagination>\n      </div>\n    </div>\n\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"addDialogFormVisible\">\n      <el-form ref=\"form\" :model=\"plan\" label-width=\"80px\">\n        <el-form-item label=\"计划名称\">\n          <el-input v-model=\"plan.planName\" style=\"width: 400px\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"计划描述\">\n          <el-input\n            v-model=\"plan.planInfo\"\n            type=\"textarea\"\n            rows=\"5\"\n            show-word-limit\n            maxlength=\"100\"\n            style=\"width: 400px\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"开始时间\">\n          <el-date-picker\n            format=\"yyyy-MM-dd\"\n            v-model=\"plan.startTime\"\n            style=\"width: 200px\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"结束时间\">\n          <el-date-picker\n            format=\"yyyy-MM-dd\"\n            v-model=\"plan.endTime\"\n            style=\"width: 200px\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n          ></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"重要性\">\n          <el-select\n            v-model=\"plan.planStress\"\n            style=\"width: 200px\"\n            placeholder=\"请选择计划重要性\"\n          >\n            <el-option label=\"P1\" value=\"P1\"></el-option>\n            <el-option label=\"P2\" value=\"P2\"></el-option>\n            <el-option label=\"P3\" value=\"P3\"></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addDialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleAddPlan\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n  \n  <script>\nexport default {\n  name: \"PlanManage\",\n  data() {\n    return {\n      addDialogFormVisible: false,\n      addPlan: true,\n      dialogTitle: \"添加学习计划\",\n      plans: [],\n      multipleSelection: [],\n      plan: {\n        uId: \"\",\n        planName: \"\",\n        planStress: \"\",\n        planInfo: \"\",\n        startTime: \"\",\n        endTime: \"\",\n      },\n    };\n  },\n  computed: {\n    uid() {\n      return this.$store.getters[\"getUserId\"];\n    },\n  },\n  methods: {\n    showAddDialog() {\n      this.plan = {};\n      this.dialogTitle = \"添加学习计划\";\n      this.addDialogFormVisible = true;\n      this.addPlan = true;\n    },\n    showModifyDialog(pid) {\n      this.addDialogFormVisible = true;\n      this.dialogTitle = \"编辑学习计划\";\n      this.addPlan = false;\n      this.$axios.get(`Plan/ShowPlanBasicInfoByPid/${pid}`).then((response) => {\n        if (response.data.flag) {\n          this.plan = response.data.data;\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    handleDelete(pid) {\n      this.$confirm(\"此操作将永久删除此条记录, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          this.$axios\n            .post(`/Plan/DeleteSinglePlanByPid/${pid}`)\n            .then((response) => {\n              if (response.data.flag) {\n                this.$message.success(response.data.msg);\n              } else {\n                this.$message.error(response.data.msg);\n              }\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n    handleMultipleDelete() {\n      if (this.multipleSelection.length === 0) {\n        this.$message.info(\"请先选中数据\");\n        return;\n      }\n      this.$confirm(\"此操作将永久删除所有选中的记录, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          let pids = [];\n          this.multipleSelection.forEach((item) => {\n            pids.push(item.pId);\n          });\n          const formData = new FormData();\n          formData.append(\"pIds\", pids);\n          this.$axios\n            .post(`/Plan/DeletePlansByPids`, formData)\n            .then((response) => {\n              if (response.data.flag) {\n                this.$message.success(response.data.msg);\n                this.getPlansList();\n              } else {\n                this.$message.error(response.data.msg);\n              }\n            });\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n    handleModify() {\n      this.plan.uId = this.uid;\n      this.$axios\n        .post(\"/Plan/UpdatePlanBasicInfo\", this.plan)\n        .then((response) => {\n          if (response.data.flag) {\n            this.$message.success(response.data.msg);\n          } else {\n            this.$message.error(response.data.msg);\n          }\n        });\n    },\n    handleAddPlan() {\n        \n      this.plan.uId = this.uid;\n      this.$axios.post(\"/Plan/AddPlans\", this.plan).then((response) => {\n        if (response.data.flag) {\n          this.$message.success(response.data.msg);\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n    handleSelectionChange(v) {\n      this.multipleSelection = v;\n    },\n    getPlansList() {\n      this.$axios.get(`/Plan/GetAllPlansByUid/1`).then((response) => {\n        console.log(response.data);\n        if (response.data.flag) {\n          this.plans = response.data.data;\n        } else {\n          this.$message.error(response.data.msg);\n        }\n      });\n    },\n  },\n  created() {\n    this.getPlansList();\n  },\n};\n</script>\n  \n  <style scoped>\n.title {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 20px;\n}\n\n.title .name {\n  font-size: 24px;\n}\n\n.search-content input {\n  width: 600px;\n  height: 30px;\n  margin-right: 20px;\n  border-radius: 15px;\n  border: 1px solid rgb(189, 189, 189);\n  outline: none;\n  text-indent: 15px;\n  font-size: 16px;\n}\n\n.content {\n  position: relative;\n  padding: 12px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n}\n\n.opts {\n  display: flex;\n  justify-content: space-between;\n}\n\n.filter-content * {\n  margin-right: 10px;\n}\n\n.pagination {\n  display: flex;\n  width: 100%;\n  margin-top: 20px;\n  justify-content: center;\n}\n\n.add-plan {\n  margin-right: 10px;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}